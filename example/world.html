<!doctype html> <meta charset="utf-8"> <title> *Leaflet.JS audio-player example </title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
<style>
  body { font: .92em sans-serif; color: #333; background: #fefefe; max-width: 80em; margin: 0 auto; }
  h1, h2 { font-weight: normal; margin: 0.6em 0; }
  .leaflet-popup-content { margin: 9px; }
  .leaflet-popup-content-wrapper { border-radius: 6px; }

  #mapid { height: 350px; }
</style>


<h1> Leaflet.JS audio-player map example </h1>

<p>The example audio files are (mostly) OGG, so you'll <a href="http://caniuse.com/#feat=ogg-vorbis">need Firefox, Chrome or Opera</a>.</p>

<p>[ To use locally, please edit the two lines in "index.html" containing the text "<code>EDIT-ME</code>". ]</p>


<p id="mapid"></p>


<script type="text/html" id="popup-template">
<div class="audio-popup">
  <h2><%= title %></h2>
  <span><%= description %></span> <a href="<%= credit_url %>">credit</a>
  <audio src="<%= audio_url %>" controls ></audio>
</div>
</script>


<script>
window.MAP_CONFIG = {
  latLng: [ 51.505, -0.09 ], // London.
  zoom: 3,
  mapId: 'mapid',
  popupTemplate: document.querySelector('#popup-template').innerText,
  checkProperty: 'audio_url',
  geoJsonUrl: '../data/world-audio-geo-data.json', // alt: "?p=map/audio-geo-data.json", <!--EDIT-ME-->
  tileUrl: 'https://api.mapbox.com/styles/v1/mapbox/dark-v9/tiles/256/{z}/{x}/{y}?access_token={accessToken}',
  //'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}'
  accessToken: 'your.mapbox.public.access.token'
}
</script>


<script src="https://cdn.jsdelivr.net/lodash/4.16.2/lodash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/superagent/2.3.0/superagent.min.js" data-src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>

<script src="../src/popup-geojson-map.js" data-alt-src="?p=map/map-geojson-popup.js" >//<!--EDIT-ME--></script>


<pre>


&copy; Nick Freear, 2016-09-26 | License: MIT.

* https://commons.wikimedia.org/wiki/Category:Audio_files_of_music
* http://www.freesound.org/search/?q=metro
* http://leafletjs.com/examples/geojson.html
* http://smalljs.org/ajax/superagent/
* USES: Leaflet.js, lodash.js, Superagent, and Mapbox.

Gist:  https://gist.github.com/nfreear/fd1005a2af7a8166862011b8fcb8a821

</pre>
